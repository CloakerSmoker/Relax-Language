DllImport i16* GetCommandLineW() {Kernel32.dll, GetCommandLineW}
DllImport i16** CommandLineToArgvW(i16*, i64*) {Shell32.dll, CommandLineToArgvW}

#Include Memory.rlx
#Include String.rlx
#Include Console.rlx

struct inner_inner {
	i64 iia,
	i64 iib
}
struct inner {
	i64 ia,
	inner_inner ii,
	i64 ib
}
struct outer {
	i64 oa,
	
	union {
		inner oi,
		i64 ou
	},
	
	i64 ob
}

define i64 Main() {
	i64 ArgC := 0
	i16* CommandLine := GetCommandLineW()
	i16** ArgV := CommandLineToArgvW(CommandLine, &ArgC)
	
	
	outer test
	
	outer* testp := &test
	
	test.oa := 10
	test.oi.ia := 20
	test.oi.ii.iia := 30
	test.oi.ii.iib := 40
	test.oi.ib := 50
	test.ob := 60
	
	IWrite(testp->oa)
	WriteCharacter(' ')
	IWrite(test.oi.ia)
	WriteCharacter(' ')
	IWrite(testp->oi.ii.iia)
	WriteCharacter(' ')
	IWrite(test.oi.ii.iib)
	WriteCharacter(' ')
	IWrite(testp->oi.ib)
	WriteCharacter(' ')
	IWrite(test.ob)
	WriteCharacter(' ')
	
	test.ou := 70
	
	IWrite(test.oi.ia)
	
	return 0
}
