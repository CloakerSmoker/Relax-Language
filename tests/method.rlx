#Require ./src/lib/Memory.rlx
#Require ./src/lib/Console.rlx

struct Test {
	i64 Value,
	
	declare void Test(),
	
	define i64 Common() {
		return 300
	},
	
	define i64 GetValue() {
		return this->Value
	},
	define i64 GetValue(i8 Pass) {
		return Pass
	},
	define void SetValue(i64 New) {
		this->Value := New
	},
	
	define void Test() {
		return this->Common()
	}
}

struct Test2 extends Test unaligned {
	define Test* Common() {
		return this As Test*
	}
	define void GetValue(i64 New) {
		this->Value := New
	}
}

struct BadIdea {
	define i64 What() {
		return 90
	}
}

define i32 Main() {
	Test* T := Alloc(#Test)
	
	Print(T->GetValue())
	
	T->SetValue(20059)
	
	PrintCharacter(',')
	
	Print(T->GetValue())
	
	PrintCharacter(' ')
	
	Test L
	
	L.SetValue(0)
	
	Print(L.GetValue())
	
	PrintCharacter(',')
	
	L.SetValue(20060)
	
	Print(L.GetValue())
	
	PrintCharacter(' ')
	BadIdea* B := 0
	Print(B->What())
	
	PrintCharacter(' ')
	
	Print(L.GetValue(90))
	
	Test2* Abc := Alloc(#Test2)
	Test* Abcd := Abc->Common()
	
	Abc->GetValue(9000)
	
	Print(" %i", Abc->Value = Abcd->Value)
	
	return 0
}
