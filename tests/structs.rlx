#Include Memory.rlx
#Include String.rlx
#Include Console.rlx

struct Test {
	i8 A,
	i8 B,
	i64 C,
	i32 D,
	i32 E
}

struct Test2 unaligned {
	i8 A,
	i64 B
}

struct Test3 {
	i8 A,
	i64 B
}

define i32 Main(i64 ArgC, i8** ArgV) {
	GetArgs(&ArgC, &ArgV)
	
	Test* T := Alloc(#Test)
	
	T->C := AToI(ArgV[1])
	
	T->A := AToI(ArgV[2]) As i8
	
	i64 Dummy := 64
	
	IWrite(T->C)
	WriteCharacter(' ')
	IWrite(T->A)
	
	
	WriteCharacter(',')
	
	Test A
	
	A.B := T->A
	A.D := T->C
	
	i64 DummyTwo := 90
	
	IWrite(A.B)
	WriteCharacter(' ')
	IWrite(A.D)
	
	WriteCharacter(',')
	IWrite(&T->C = T~>C)
	
	Test* Q := &A
	
	IWrite(Q~>A = A~>A)
	IWrite(Q~>A = T~>A)
	
	WriteCharacter(',')
	
	Test2 V
	
	IWrite(V~>B % 8)
	
	Test3 W
	
	IWrite(W~>B % 8)
	
	return 0
}
